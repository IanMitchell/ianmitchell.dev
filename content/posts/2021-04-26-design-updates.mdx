---
title: Design Updates
date: 2021-04-26
tags:
  - Code
  - Design
---

I finally got the motivation to continue working on my website two or three weeks ago. The last design had several large issues which I've attempted to fix up. I also touched up some of the blog functionality, but most of that shouldn't be immediately transparent (I think the only thing you might notice is much improved syntax highlighting). Here's some rough notes about what I did and what went into it all.

## General Vibes

I liked the structure of my website, but I didn't like the styles. The homepage needed work. I needed a navigation bar. The footer had room for improvement. The minimalism of the website was nice. The tech stack was largely ok.

I liked the colors I had. The goal was to keep those in use, but just shuffle how I was using them.

## Tailwind

I almost used Tailwind for the redesign. I don't know why I didn't end up using it, to be honest. I'm sure the values and scaling system would make my website more consistent and there would be less bugs in general. I think part of me just likes Sass, and this is the last website I still use it. I guess this was an emotional decision, I can't really rationalize it.

I've been using Tailwind more and more in my recent projects, and I still really like it. It struggled when I used it on Ruby on Rails (I think [GitHub's ViewComponent](https://github.com/github/view_component) library would have _really_ helped smooth the rough edges) but Tailwind is still a fantastic choice for React websites.

## Dark Mode / Light Mode

The last design iteration was very dark. I like having a dark mode, but I don't like having it be the only option - I know a lot of people struggle to read light text on dark backgrounds, so my top priority was to create a light mode / dark mode system. I'm pretty proud of how it ended up. I

## Readability / Typography

I'm still working on this, but I tried to make things just generally... nicer. I did some work specifying font weights instead of using browser-computed values[^1] Font updates, increasing sizes, padding, line-height, unit types... there was a lot to change.

I spent a lot of time studying how [Josh Comeau](https://www.joshwcomeau.com) laid out his typography styles. I think he absolutely nailed it.

## Syntax highlighting

I spent some time looking at [Shiki](https://shiki.matsu.io) as an alternative to [Prism](https://prismjs.com). [Ryan Florence](https://twitter.com/ryanflorence) has been tweeting some really neat stuff he's done with the library recently, and it inspired me to spend some time trying to integrate with it. I might have more success if I hadn't _bundled_ it with mdx-bundler (get it) but I struggled a bit to integrate it with Remark and Rehype and get everything working nicely together.

At the same time, I've been using a lot of [Prisma](https://www.prisma.io) and absolutely love their custom Prism highlighter component. I decided to use it as a base and build on top of it rather than trying to spend more time trying to get Shiki into a comparable state.

I'm largely happy with the result. The two syntax themes are from [shuding\_](https://twitter.com/shuding_) I believe - I can't find the tweet anymore, but from what I can tell he published a Zeit (Vercel) VS Code theme back in 2019 with these colors.

## MDX and ProseMirror

MDX is a love-hate thing for me. I love Markdown, and the ability to slip in JSX in some places is fantastic. Over time though, I have this feeling that React developers are making it more of Markdown-in-JSX system. Instead of Markdown being the first class citizen with JSX sprinkles, it feels like it's becoming JSX first and Markdown here and there.

My old system compiled MDX in a way that prevented it from rehydrating on the client - it meant I couldn't use interactive components, ever. This was a top priority of mine to fix. There's been a lot of chatter recently about [mdx-bundler](https://github.com/kentcdodds/mdx-bundler), and on paper it looks fantastic. I spent several days integrating with it, fighting through a host of issues before ultimately giving up and adopting [next-mdx-remote](https://github.com/hashicorp/next-mdx-remote) instead. Some of the reasons why:

1. The Prisma Prism component I used as a starting point for my component relied pretty heavily on metastring values sent to Code Blocks. xdm, the system powering mdx-bundler, did not support them. This issue was possible to get around with a custom rehype plugin.
2. Markdown's `inlineCode` component could be targeted by MDX, but xdm got rid of it altogether. Single backticks or multiple backticks all went to the Code component. The recommended approach for inline code blocks was to use `<code>` HTML directly. This was something you could fix, but it felt like a fundamental departure from Markdown and rubbed me the wrong way.
3. You needed to import React components to use them, but you had to pass in a mapping of file locations with their source file when you compile the MDX - this confused me a bit. You also need to write the imports to be relative to the file where you compile them, not where the file actually is. It took me way too long to figure this out.
4. Instead of requiring two line breaks between JSX lines to render strings as Markdown again, if content didn't start with a tag it was treated as Markdown. This is a little easier to explain with a demo -

```jsx
// MDX
<MyComponent>
  This *is not* Markdown but a regular string.
</MyComponent>
<MyComponent>

  This, however, *is* Markdown.

</MyComponent>

// xdm
<MyComponent>
  This *is* Markdown!
</MyComponent>
```

Seems like a small thing, so why does it matter? Because it turns out that this prevents a lot of embeds / other HTML from working as expected. Take a CodePen embed for instance

```jsx
<iframe {...props}>
  See the Pen <a href={`https://codepen.io/IanMitchell/pen/${id}/`}>{title}</a>{' '}
  by Ian Mitchell (<a href="https://codepen.io/IanMitchell">@IanMitchell</a>) on{' '}
  <a href="https://codepen.io">CodePen</a>.
</iframe>
```

This breaks xdm! `See the Pen{' '}` is treated as Markdown, and the parser sees `{` and dies. Another small thing, and one that's easy to work around, but I just fundamentally am stubborn and disline editing my past posts.

---

Overall, xdm and mdx-bundler were really impressive with their speed and general API design, but parts of their opinionated design lead me to stick with next-mdx-remote. If you aren't a grumpy stickler like me, I highly recommend checking the libraries out, especially for new projects.

I also spent a little bit of time looking at [TipTap](https://tiptap.dev) as well, after I saw [Leah](https://twitter.com/LeahLundqvist) tweet a glowing review of it. I decided it wouldn't quite work with how I want to structure content on this blog, but if I ever get time to work on Ramble again it will be a fantastic fit.

## /uses Page

I finally got started on my [/uses](https://ianmitchell.dev/uses) page. The blurred icon system was inspired by [a Twitter thread on a similar effect from Splitbee](https://twitter.com/pacocoursey/status/1302028626724974592). I got a chance to use CSS Variables here, which I wouldn't have if I had ended up going with Tailwind earlier. That made me feel good.

There's still a lot to write here, and some pictures to take, but at least the page exists now.

# Let me know what you think!

Personally I really like how the design ended up, but that's just me. If you have any feedback on the current design, let me know on [Twitter](https://twitter.com/ianmitchel1)!

[^1]: Don't use `font-weight: bold` with variable fonts. I can't find the Tweet that taught me this anymore, but Browsers scale that up differently, and if you don't have the right font weight pulled in from your variable font, the Browser will apply its own algorithm to bold a font. And that looks _nasty_. Instead, specify the weight on the variable font and then use `font-weight: 700` or similar.
